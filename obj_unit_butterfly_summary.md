### **obj_unit_butterfly (나비 유닛) 상세 정보**

나비는 '알'에서 시작하여 '애벌레' → '번데기' → '나비'로 이어지는 완전변태를 거치는 유닛입니다. 변태 위치와 시점에 따라 성능이 극적으로 변화하며, 수명이 다하면 다시 알로 돌아가 윤회하는 독특한 메커니즘을 가집니다.

*   **역할**: 성장 및 변신 유닛 / 위치 기반 후반 공격수 (Transformation / Positional Finisher)
*   **초기 체력**: 1 (모든 단계 시작 시)

---

### **핵심 메커니즘: 생장과 윤회 (Life Cycle & Rebirth)**

#### 1단계: 애벌레 (Worm)
*   **체력**: 1
*   **이동 방식**: 직선(상하좌우)으로 최대 2칸까지 이동 가능합니다.
*   **부화**: '알' 상태에서 주변에 다른 유닛이 없으면 '애벌레'로 부화합니다.
*   **역할**: 특별한 능력은 없으며, 다음 단계인 '번데기'로 변태하기 위해 최적의 위치를 찾아 이동하는 역할을 합니다.

#### 2단계: 번데기 (Cocoon)
*   **체력**: 1
*   **이동 방식**: 이동이 불가능합니다.
*   **변태 조건**: **주변 3칸 이내**에 다른 유닛이 없는 고립된 위치에 도달하면, 이동이 불가능한 '번데기'가 되며 **방어력 2**를 얻습니다.
*   **충전과 성장**: 번데기는 나비로 우화하기 위해 몇 턴간 '충전'하며, 이 충전한 턴 수는 최종 형태의 **체력, 수명, 그리고 공격력**에 막대한 영향을 미칩니다.
*   **위치에 따른 성장 전략 (핵심)**:
    *   **가장자리 변태**: 필요한 충전 시간이 **짧아** 나비가 빨리 나오지만, 충전량이 적어 **체력이 낮고 수명이 짧은 나비**가 됩니다. (빠른 기습용)
    *   **중앙 변태**: 필요한 충전 시간이 **길어** 위험에 더 오래 노출되지만, 충전량이 많아 **체력이 높고 수명이 긴 강력한 나비**가 됩니다. (후반 에이스용)

#### 3단계: 나비 (Butterfly)
*   **우화**: 충전을 마친 번데기는 최종 형태인 '나비'가 됩니다.
*   **체력과 수명**:
    *   체력: 최대 체력 = **(번데기였던 턴 수) * 100**
    *   활동 가능 턴 수(수명) = **번데기였던 턴 수**
*   **이동 방식**: 직선(상하좌우)으로 이동하며, 이동과 연계된 특수 공격(돌진 또는 휩쓸기)을 사용합니다.
*   **공격 방식: 직선 돌진 / 휩쓸기 (Charge / Swipe Attack)**
    *   나비는 자신의 현재 위치에서 상하좌우 **직선 방향으로 돌진**하여 공격합니다.
    *   이 공격은 경로상의 적들을 타격하며, 공격력은 나비의 나이와 맵 상의 위치에 따라 특별히 계산됩니다.
    *   **특수 이동: 장애물 뛰어넘기**: 나비는 **지나갈 수 없는 한 칸을 뛰어넘어 이동하거나 공격**할 수 있습니다. 이때, 뛰어넘은 칸의 중앙에 적 유닛이 위치해 있다면, 그 **뛰어넘은 적 유닛에게도 공격**을 가할 수 있습니다.
*   **공격력 계산 방식**: 나비의 공격력은 두 가지 요소의 곱으로 결정됩니다.
    1.  **기본 공격력 (최후의 불꽃)**: `(현재 체력) * tan(90도 * 현재 나이 / (총 수명 + 2))` 라는 복잡한 삼각함수 공식을 따릅니다. 이 공식의 핵심은 나비가 **수명이 다할수록 '기본 공격력'이 기하급수적으로 증폭**되는 '최후의 불꽃' 특성을 만든다는 것입니다.
    2.  **위치 보너스 (증폭)**: 위에서 계산된 기본 공격력에 **맵의 가로 중앙으로부터 떨어진 칸 수만큼의 배율**이 추가로 적용됩니다. 즉, 가장자리에 있을수록 최종 공격력이 극대화됩니다.
*   **소멸과 윤회**: 정해진 수명이 다하면, 나비는 '알(Egg)'이 되어 생장 주기를 다시 시작합니다.

#### 0단계: 알 (Egg)
*   **체력**: 1
*   **이동 방식**: 이동이 불가능합니다.
*   나비가 수명을 다한 형태로, **체력 1, 방어력 1**을 가집니다. 주변에 다른 유닛이 없으면 다시 '애벌레'로 부화하여 생장 주기를 반복합니다.