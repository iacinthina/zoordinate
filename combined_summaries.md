# 유닛 정보

## 왕 계열

*   **유닛**: 사자
*   **공통점**: 게임의 승패를 결정하는 **핵심 유닛**입니다. 체력이 1로 매우 취약하지만, 어떤 적이든 단번에 처치하는 강력한 공격 능력을 지니고 있어, 보호와 공격적 활용 사이의 신중한 조작이 요구됩니다.

# 사자 (obj_unit_lion)

> 아군 진영의 왕이자 게임의 승패를 결정하는 핵심 유닛입니다. 체스의 킹처럼 모든 방향으로 한 칸씩 움직일 수 있으며, 어떤 적이든 단 한 번의 공격으로 즉시 처치하는 강력한 능력을 가지고 있습니다. 그러나 체력이 1로 고정되어 있어 한 번이라도 피해를 입으면 바로 파괴됩니다.

---

### 1. 역할 (Role)
*   **주 역할**: 왕 (King) / 승패 결정 (Win/Loss Condition)
*   **부 역할**: 고가치 단일 대상 암살자 (High-Value Single Target Assassin)

### 2. 기본 능력치 (Base Stats)
*   **체력**: 1 (고정)
*   **공격력**: 특수 (대상의 최대 체력만큼 피해)

### 3. 이동 (Movement)
*   **이동 방식**: 체스의 킹(King)처럼 상하좌우 및 대각선을 포함한 모든 방향으로 인접한 1칸으로 이동할 수 있습니다.

### 4. 핵심 메커니즘 (Core Mechanics)
> 사자는 게임의 핵심 목표물인 동시에, 강력한 공격 능력을 가진 유닛입니다.

*   **즉사 공격**: 공격 대상의 최대 체력만큼 피해를 주어 어떤 적이든 단 한 번의 공격으로 즉시 처치합니다.
*   **취약한 방어**: 체력이 1로 고정되어 있어, 어떤 종류의 공격이든 단 한 번의 피해로도 즉시 파괴됩니다.
*   **승패 결정**: 사자가 파괴되면 해당 진영은 즉시 패배합니다.

### 5. 능력 상세 (Abilities)

#### 주 능력: 왕의 일격 (King's Strike)
*   **능력명**: 왕의 일격
*   **발동 조건**: 공격 가능한 적 유닛을 대상으로 선택합니다.
*   **효과**: 대상에게 최대 체력만큼의 피해를 입혀 즉시 처치합니다.

#### 패시브 능력: 왕의 체력 (King's Health)
*   **능력명**: 왕의 체력
*   **발동 조건**: 항상 활성화
*   **효과**: 체력이 1로 고정되어 있어, 모든 피해에 즉시 파괴됩니다.

### 6. 비고 (Notes)
*   사자는 매우 공격적인 유닛이 될 수 있지만, 극도로 취약하기 때문에 신중한 보호와 위치 선정이 중요합니다.
*   게임의 최종 목표이므로, 사자의 생존 여부가 곧 진영의 승패를 좌우합니다.
---



## 여왕 계열

*   **유닛**: 다람쥐, 바이러스, 독수리, 늑대
*   **공통점**: 체스의 '퀸'처럼 **자유롭고 강력한 행동 방식**을 가집니다. 각자 고유하고 복잡한 특수 능력(자원 수집, 기생, 대체 승리 조건 등)을 보유하여 게임의 판도를 뒤흔드는 에이스 유닛들입니다.

# 다람쥐 (obj_unit_squirrel)

다람쥐는 맵에 떨어진 '도토리'를 줍고 사용하며 강력한 특수 능력을 발휘하는 기동성 높은 유닛입니다. 주운 도토리의 수에 따라 공격력이 결정되어 유닛의 성능이 크게 달라집니다.

*   **역할**: 성장형 공격수 (Nuker) / 전략적 핵심 유닛
*   **기본 능력치**:
    *   **체력**: 150
    *   **기본 공격력**: 150
*   **핵심 자원**: **도토리**
    *   **공격력 계산**: `기본 공격력(150) + 보유한 도토리 수`
    *   최대 공격력은 **1300**까지 도달할 수 있습니다.
    *   맵에 있는 도토리를 줍거나, 특정 위치에 버릴 수 있습니다.

*   **이동**:
    *   체스의 '퀸(Queen)'처럼 **상하좌우 및 대각선 방향으로 제약 없이** 움직일 수 있습니다.
    *   **도토리 타일로의 특수 이동 (Shift)**:
        *   주변 3칸 이내에 도토리(`queen_modifier` 값을 가진)가 있는 빈 타일이 있을 경우, 해당 타일로 **즉시 이동**할 수 있습니다.
        *   이동 후 도토리를 줍거나 버리는 행동을 했을 경우, **그 자리에서 즉시 추가 행동 기회**를 얻어 연쇄적인 이동 및 행동이 가능합니다.

*   **공격**:
    *   현재 공격력(기본 공격력 + 도토리 수)만큼의 피해를 줍니다.
    *   공격 후에는 일반적으로 보유했던 도토리를 모두 소모하며(공격력이 150으로 초기화), 소모된 도토리는 **공격받은 대상의 위치에서 퍼져나가** 주변 타일에 떨어집니다.

*   **특수 능력 (현재 공격력에 따른 보너스)**:
    *   **공격력이 10의 배수일 때**: 턴을 종료해도 보유한 도토리가 **사라지지 않습니다.** (공격력이 유지됩니다)
    *   **공격력이 100의 배수일 때**: 공격 시 **도토리를 소모하지 않습니다.** (공격력이 유지됩니다)
    *   **공격력이 1000의 배수일 때**: 공격 시 **도토리를 소모하지 않으며, 상대를 즉사**시킵니다.

*   **패널티**:
    *   **턴 종료 시**: 현재 공격력이 10의 배수가 아닐 경우, 가지고 있던 모든 도토리를 현재 위치에 떨어트리고 공격력이 150으로 초기화됩니다. 이때 도토리는 **다람쥐가 있던 자리에서 퍼져나가** 주변 타일에 떨어집니다.
    *   **사망 시**: 보유하고 있던 모든 도토리를 그 자리에 떨어트립니다. 이때 도토리는 **다람쥐가 사망한 자리에서 퍼져나가** 주변 타일에 떨어집니다.

---

### [부록] 도토리(Acorn) 드롭 알고리즘 (`drop_queen_modifier`)

다람쥐가 드롭하는 도토리는 `drop_queen_modifier` 함수에 의해 맵에 배치됩니다. 이 함수의 핵심 목표는 정해진 총량의 도토리를 여러 타일에 걸쳐 분배하는 것이며, 동작 방식은 시각 효과의 시작점 유무에 따라 두 가지로 나뉩니다.

#### 1. 특정 위치 기반 드롭 (예: 공격 시, 턴 종료 시)

시작 위치가 지정된 경우, 도토리는 정교한 가중치 분배 알고리즘을 따릅니다.

1.  **맵 분할**: 전체 맵을 가로 중앙을 기준으로 `왼쪽`, `중앙`, `오른쪽` 세 구역으로 나눕니다.

2.  **중앙 특별 분배 (시작점이 중앙 부근일 경우)**:
    *   만약 드롭 시작점이 맵의 중앙 지역이라면, 시스템은 **'중앙 특별 보너스'**를 먼저 계산합니다.
    *   전체 도토리의 약 **6% ~ 14%** 에 해당하는 양을 **10의 배수**로 맞춰서(예: 30, 50, 110), 중앙 구역의 타일 한 곳에 먼저 배치합니다.
    *   이는 중앙 지역에서의 드롭에 특별한 가치를 부여하는 예외 처리 로직입니다.

3.  **좌/우 비대칭 분배**:
    *   '(중앙 특별 분배 후) 남은 도토리'를 `왼쪽`과 `오른쪽` 구역에 나누어 분배합니다.
    *   분배 비율은 무작위적이지만, **한쪽에 약 30%~70%**, **다른 쪽에 나머지 70%~30%** 가 할당되는 방식입니다. 이 비율은 드롭 시작 위치와는 무관하게 무작위로 결정되어, 어느 한쪽이 항상 더 많이 받는 구조는 아닙니다.

4.  **최종 분배**:
    *   각 구역(좌, 우)에 할당된 총량 내에서, 지정된 개수의 타일에 무작위 양의 도토리가 나뉘어 배치됩니다.

이 방식은 도토리 드롭이 완전한 무작위가 아닌, 특정 위치를 중심으로 방향성을 가지면서도 예측 불가능성을 유지하게 하여 전략적 깊이를 더합니다.

#### 2. 일반 드롭 (위치 미지정)

별도의 시작 위치가 지정되지 않은 경우, 알고리즘은 훨씬 단순하게 동작합니다.

1.  맵 전체에서 도토리가 없는 모든 빈 타일을 수집합니다.
2.  수집된 타일 목록을 무작위로 섞습니다.
3.  섞인 타일 목록에서 정해진 개수만큼의 타일을 골라 무작위 양의 도토리를 분배합니다.
# 바이러스 (obj_unit_influenza)

'바이러스'는 다른 유닛에 '감염(Sticking)' 상태로 기생하여 증식하고 스스로를 강화하는 특수한 유닛입니다. 힘의 크기가 분수 형태로 표현되는 독특한 메커니즘을 가집니다.

*   **이름**: 바이러스
*   **역할**: 기생 및 증식형 유닛 / 특수 유닛
*   **핵심 메커니즘**:
    *   **분수 값**: 바이러스의 힘은 분수(`분자/분모`)로 표현됩니다. 처음에는 **1/1** 상태로 시작합니다.
    *   **감염**: 다른 유닛(숙주)에 달라붙어 기생하는 것이 기본 행동 방식입니다.

*   **행동 방식 (상황별)**:

    1.  **숙주에 기생 중일 때**:
        *   **증식 (적군 기생 시)**: 적군 유닛에게 기생 중일 경우, 턴이 지날 때마다 **분자가 1씩 증가**하며 바이러스가 점점 강력해집니다. (예: 1/1 → 2/1 → 3/1)
        *   **전이**: 현재 숙주에서 인접한 다른 유닛이나 빈 타일로 이동할 수 있으며, 이 과정에서 새로운 바이러스를 생성하여 퍼져나갑니다.

    2.  **독립 상태일 때 (숙주가 없을 때)**:
        *   **자연 소멸**: 숙주가 없는 상태로 턴을 마치면 **분자가 1씩 감소**합니다.
        *   분자가 0이 되면 바이러스는 소멸합니다.

*   **주요 능력**:
    *   **합체**: 두 개의 바이러스 유닛이 하나로 합쳐질 수 있습니다. 이때 각 바이러스의 분수 값이 수학적으로 더해져 더욱 강력한 단일 개체가 됩니다. (예: 1/2 바이러스와 1/3 바이러스가 합쳐지면 5/6 바이러스가 됨)
    *   **폭발**: 특정 조건 하에 '폭발 준비' 상태에 돌입할 수 있으며, 이 상태에서는 강력한 범위 공격(추정)을 할 수 있습니다.

*   **생존**:
    *   기생하던 숙주가 사망하면 즉시 다른 곳으로 전이를 시도하며, 만약 이동할 곳이 없으면 함께 소멸합니다.
---

# 독수리 (obj_unit_eagle)

독수리는 맵의 '먹이(혈흔)'를 섭취하며 생존하는 유닛입니다. 먹이를 먹어 체력을 보충하고, 이를 소모하여 전장의 판도를 뒤집을 수 있는 강력한 특수 공격을 사용할 수 있습니다. 하지만 먹이를 섭취하는 행위 자체가 체력 감소로 이어지는 양날의 검과 같은 특징을 가집니다.

*   **이름**: 독수리 (코드 주석 기반, 실제 할당된 이름은 '다람쥐'로 오류로 보임)
*   **역할**: 성장형 광역 딜러 / 하이리스크 하이리턴 유닛
*   **기본 능력치**:
    *   **기본 체력**: 150

*   **이동**:
    *   체스의 '퀸(Queen)'처럼 **상하좌우 및 대각선 방향으로 제약 없이** 움직일 수 있습니다.
    *   **먹이(혈흔) 타일로의 특수 이동 (Shift)**:
        *   주변 3칸 이내에 먹이(혈흔)가 있는 빈 타일이 있을 경우, 해당 타일로 **즉시 이동**할 수 있습니다.
        *   먹이(혈흔)를 섭취하면 **그 자리에서 즉시 추가 행동 기회**를 얻습니다.

*   **핵심 메커니즘: 체력과 먹이 순환**
    1.  **체력 소모 (매 턴)**:
        *   **먹이를 먹지 않은 턴**: 체력이 **15**만큼 고정적으로 감소합니다.
        *   **먹이를 먹은 턴**: 그 턴에 섭취한 **먹이의 총 가치만큼** 체력과 최대 체력이 함께 감소합니다.
    2.  **먹이 섭취**:
        *   맵에 생성된 '혈흔' 타일로 이동하여 먹이를 섭취할 수 있습니다.
        *   섭취 시, 먹이의 가치만큼 **체력과 최대 체력이 증가**합니다.
        *   먹이를 섭취하면 **추가 행동 기회**를 얻습니다.
    3.  **먹이 생성**:
        *   턴을 마칠 때, 해당 턴에 자신이 섭취한 먹이 개수의 절반만큼 새로운 먹이(혈흔)를 맵의 무작위 위치에 생성합니다.

*   **주요 능력**:
    *   **특수 공격 (숫자 맞추기 게임)**:
        *   먹이를 하나 이상 섭취했을 때 발동할 수 있는 강력한 능력입니다.
        *   플레이어는 **50에서 200 사이**의 숨겨진 숫자를 맞춰야 합니다.
        *   **성공 시**:
            *   자신이 섭취했던 먹이의 개수에 비례하는 넓은 범위 안에 있는 **모든 적을 즉사**시키는 강력한 광역 공격을 발동합니다.
    *   **턴 종료 공격**:
        *   턴을 마칠 때, 인접한 적 하나에게 1의 피해를 주는 미미한 공격을 무작위로 실행합니다.
---

# 늑대 (obj_unit_wolf)

> 체스의 퀸처럼 자유롭게 이동하며, '표식'을 남겨 전장을 지배하고, 표식이 있는 적을 즉시 처치하는 암살자 유닛입니다. 궁극적으로 '표식 점수'를 100까지 모으면 게임에서 승리하는 독특한 승리 조건을 가집니다.

---

### 1. 역할 (Role)
*   **주 역할**: 암살자 (Assassin) / 추격자 (Chaser)
*   **부 역할**: 대체 승리 유닛 (Alternate Win Condition)

### 2. 기본 능력치 (Base Stats)
*   **체력**: 300 (가정치, `WOLF_BASE_HEALTH` 상속)
*   **공격력**: 0 (특수 공격만 보유)
*   **핵심 자원**: 표식 점수 (Mark Charge, `unit_atk`) - 0에서 시작하여 100에서 승리.

### 3. 이동 (Movement)
*   **기본 이동**: 체스의 퀸(Queen)처럼 상하좌우 및 대각선 모든 방향으로 장애물이 없는 한 자유롭게 이동할 수 있습니다.
*   **특수 이동 (Shift)**: '지원' 능력으로 생성된 '늑대 표식'(`obj_unit_wolf_mark`)이 있는 빈 타일로 즉시 도약(순간이동)할 수 있습니다.

### 4. 핵심 메커니즘 (Core Mechanics)
> 늑대는 직접 표식을 설치하고, 그 표식을 활용해 적을 사냥하며, 궁극적으로 게임을 끝내는 것을 목표로 합니다.

*   **지원 (Support)**:
    *   체력 100을 소모하여 발동하는 능력입니다.
    *   발동 시, 맵의 비어있는 공간에 3개의 '늑대 표식'(`obj_unit_wolf_mark`)을 생성합니다. 이 표식들은 주로 적진 쪽에 생성됩니다.

*   **사냥 (Hunt)**:
    *   늑대는 기본적으로 공격 능력이 없지만, **'표식(Marked)' 버프**(`obj_buff_marked`)가 부여된 적 유닛을 대상으로 즉시 처치하는 공격을 할 수 있습니다.
    *   이 공격에 성공하면, 늑대는 대상의 체력만큼 자신의 체력을 흡수하여 회복합니다(최대 체력까지).
    *   또한, '표식 점수'(`unit_atk`)가 증가합니다.

*   **승리 조건 (Victory Condition)**:
    *   '표식 점수'가 **100**에 도달하면, 늑대의 진영이 즉시 게임에서 승리합니다.
    *   표식 점수가 100에 도달한 늑대는 몸에서 빛나는 시각 효과를 방출합니다.

### 5. 능력 상세 (Abilities)

#### 주 능력 1: 지원 (Support)
*   **능력명**: 지원
*   **발동 조건**: 자신의 턴에 체력이 100 이상일 때, 제자리에서 행동을 선택하여 발동합니다.
*   **효과**: 체력 100을 소모하고, 맵의 빈 공간에 3개의 '늑대 표식'을 생성합니다. 이 표식 타일은 늑대가 '특수 이동(Shift)'을 할 수 있는 거점이 됩니다.

#### 주 능력 2: 사냥 (Hunt)
*   **능력명**: 사냥
*   **발동 조건**: '표식' 버프가 있는 적 유닛에게 이동 시 발동합니다.
*   **효과**: 대상을 즉시 처치하고, 체력을 흡수하며, '표식 점수'를 획득합니다.

#### 보조 능력: 특수 이동 (Shift)
*   **능력명**: 특수 이동
*   **발동 조건**: '지원' 능력으로 설치된 '늑대 표식' 타일로 이동 시 발동합니다.
*   **효과**: 해당 위치로 즉시 도약합니다.

### 6. 비고 (Notes)
*   늑대는 적을 직접 공격하기보다, '지원' 능력으로 판을 깔고, '표식'이 있는 적을 골라 결정적인 순간에 암살하는 전략적인 플레이가 요구됩니다.
*   체력을 소모하여 승리의 발판을 마련하고, 적을 처치하여 다시 체력을 회복하는 독특한 자원 순환 구조를 가집니다.
---

---

## 사제 계열

*   **유닛**: 오징어, 뱀, 박쥐, 돌고래
*   **공통점**: 직접적인 공격보다 **특수한 방식으로 전장에 영향**을 미칩니다. 아군을 치유하거나, 적을 약화시키고, 능력치를 조작하는 등 간접적이지만 매우 전략적인 역할을 수행합니다. 대각선 이동을 공유하는 경우가 많습니다.

# 오징어 (obj_unit_squid)

오징어는 자신의 체력을 희생하여 아군을 치유하는 데 특화된 순수 지원 유닛(Healer)입니다. 이동량에 따라 치유 효율이 달라지는 독특한 메커니즘을 가지고 있습니다.

*   **역할**: 단일 대상 치유 담당 (Healer / Support)
*   **기본 능력치**:
    *   **기본 체력**: 750 (`SQUID_BASE_HEALTH`)

*   **이동 방식**:
    *   **대각선 방향**으로 체스의 비숍(Bishop)처럼 거리 제약 없이 움직일 수 있습니다.
    *   **이동 제약**: 한 턴에 첫 번째 이동을 한 후, 다음 이동 시에는 **직전에 움직였던 방향과 정반대 방향으로는 움직일 수 없습니다.** (예: 북동쪽으로 이동했다면, 다음 이동으로는 남서쪽으로 이동 불가)

*   **핵심 메커니즘: 희생과 회복**:
    *   **치유 방식**: 자신의 현재 체력을 소모하여 아군을 치유합니다.
    *   **체력 회복**: 치유를 위해 소모했던 체력은, 다음 자신의 턴이 시작될 때 전량 회복됩니다. 즉, 한 턴 동안만 체력이 감소하는 구조입니다.

*   **치유 능력**:
    1.  **치유량 계산**:
        *   인접한 아군을 대상으로 선택하면, 플레이어는 치유 배율(`N`)을 직접 입력합니다.
        *   최종 치유량은 **`(10 - 이동량) * N`** 으로 결정됩니다.
    2.  **이동과 치유 효율의 관계**:
        *   오징어의 치유 효율은 '이동량'(`heal_rotation`) 카운터에 따라 결정되며, 이 카운터는 **0부터 9까지 순환하는 구조**를 가집니다.
        *   치유의 기본값은 `10 - 이동량` 입니다.
        *   오징어가 움직이면 이동 거리에 비례하여 '이동량' 카운터가 증가합니다.
        *   턴마다 2번의 이동 기회를 가집니다.
    3.  **특수 능력: "완벽한 회복"**:
        *   치유를 받은 아군의 체력이 **최대치와 정확히 일치**하게 되면 '완벽한 회복'이 발동합니다.
        *   '완벽한 회복'을 받은 아군은 **즉시 추가 행동 기회**를 얻습니다.

> 이 유닛은 목표 치유 효율을 만들기 위해 이동 거리를 정밀하게 조절하거나, '완벽한 회복'을 전략적으로 사용하여 아군의 턴을 이끌어내는 등 높은 수준의 계산 능력이 요구됩니다.
---

# 뱀 (obj_unit_snake)

뱀은 이동을 통해 자신의 '독' 수치를 강화하고, 이를 이용해 적의 현재 체력에 비례한 피해를 입히는 유닛입니다. 특히, 특정 조건 하에 상대를 즉사시키고 자신의 체력을 모두 회복하는 강력한 특수 능력을 보유하고 있습니다.

*   **역할**: 기동형 암살자 / 처형 전문가 (Mobile Assassin / Execute Specialist)
*   **기본 능력치**:
    *   **기본 체력**: 350 (`SNAKE_BASE_HEALTH`)

*   **핵심 메커니즘: 중첩되는 독**
    *   뱀의 공격력은 **'독 퍼센트(%)'** 수치로 결정되며, 이 수치만큼 대상의 **현재 체력**에 비례한 피해를 줍니다.
    *   **독 수치 강화**:
        *   기본 독 수치는 **1%** 입니다.
        *   뱀이 **대각선으로 1칸 움직일 때마다 독 수치가 1%씩 증가**합니다. 즉, 많이 움직일수록 더 강력한 독을 갖게 됩니다.
    *   **독 초기화**: 강화된 독 수치는 라운드가 끝나면 다시 기본값인 1%로 초기화됩니다. 매 턴 새롭게 독을 충전해야 합니다.

*   **공격**:
    *   대상의 현재 체력에 현재 자신의 독 수치만큼의 % 피해를 입힙니다.
    *   공격은 턴 당 1회만 가능하며, 공격 후에도 남아있는 이동 기회는 사라지지 않아 추가 이동이 가능합니다.

*   **특수 능력: "맹독" 처형**
    *   일반 공격 시, 특정 조건이 만족되면 자동으로 발동하는 패시브 능력입니다.
    *   **발동 조건**: 공격 전에는 대상의 체력이 뱀보다 높았지만, 공격 후 대상의 체력이 뱀보다 낮아졌을 경우.
    *   **발동 효과**:
        1.  대상을 **즉시 처형**합니다 (체력을 0으로 만듭니다).
        2.  뱀 자신의 체력이 **최대치까지 모두 회복**됩니다.

*   **이동**:
    *   주로 대각선으로 움직이며, 한 턴에 2번의 이동 기회를 가집니다.
    *   직전에 움직였던 방향으로는 바로 되돌아갈 수 없는 이동 제약이 있습니다.
---

# 박쥐 (obj_unit_bat)

박쥐는 주변의 모든 유닛(아군, 적군 포함)의 능력치를 뒤집는 강력한 광역 능력을 가진 유닛입니다. 체력이 1에 불과하여 매우 취약하지만, 게임의 판도를 한 번에 바꿀 수 있는 잠재력을 지니고 있습니다.

*   **역할**: 광역 능력치 조작 유닛 (Area-of-Effect Debuffer)
*   **기본 능력치**:
    *   **기본 체력**: 1 (`BAT_BASE_HEALTH`)

*   **핵심 메커니즘: 초음파 (능력치 반전)**
    *   턴 종료 시, **자신을 포함한 주변 8방향 1칸 이내**의 모든 유닛에게 영향을 미치는 토글 방식의 능력을 사용합니다.
    *   이 능력은 사용할 때마다 효과가 반전되는 **토글(Toggle) 방식**입니다.

    *   **상태 1: 능력치 반전 (Debuff)**
        *   **모든 유닛**: 대상의 현재 체력을 역수(`1 / 현재 체력`)로 만듭니다. 예를 들어, 체력이 200인 유닛은 체력이 1/200로 변경되어 사실상 즉시 처치 가능한 상태가 됩니다. **박쥐 자신도 이 효과를 받습니다.**
        *   **바이러스 유닛 (`obj_unit_influenza`)**: 바이러스의 힘을 나타내는 분수의 분자와 분모를 뒤바꿉니다. 예를 들어, 5/1의 힘을 가진 바이러스는 1/5로 급격히 약화됩니다.

    *   **상태 2: 능력치 복원 (Buff / Revert)**
        *   능력을 다시 사용하면 반전된 상태의 유닛들은 원래대로 돌아옵니다. 체력이 1/200이었던 유닛은 다시 200으로, 1/5이었던 바이러스는 다시 5/1로 복원됩니다. **박쥐 자신의 체력도 이 효과를 통해 복원됩니다.**

*   **이동과 생존력**:
    *   한 턴에 최대 2번까지 대각선으로 이동할 수 있습니다.
    *   **체력 분할**: 박쥐가 이동할 경우, 이동한 거리에 비례하여 자신의 체력이 2의 거듭제곱으로 나누어집니다. 기본 체력이 1이기 때문에, **단 한 칸이라도 움직이면 체력이 극도로 낮은 소수(fraction)가 됩니다.** 이후 '능력치 반전'을 사용하면, 이 분수 체력을 역수로 만들어 순간적으로 높은 체력을 얻는 전략적 플레이가 가능합니다.
---

# 돌고래 (obj_unit_dolphin)

돌고래는 직접적인 공격 대신, 자신이 움직인 거리를 동력 삼아 지정한 방향으로 '파동'을 발사하는 독특한 광역 딜러 겸 힐러입니다. 파동의 주기를 플레이어가 직접 조절하여, 아군을 치유하거나 적군을 공격하는 등 높은 수준의 실력과 계산을 요구하는 유닛입니다.

*   **역할**: 광역 컨트롤러 / 스킬샷 기반 공격수 (Area-of-Effect Controller / Skill-based Nuker)
*   **기본 능력치**:
    *   **기본 체력**: 750 (`SQUID_BASE_HEALTH` 상수를 사용)

*   **핵심 메커니즘: 사인(Sine) 파동 공격**
    *   돌고래의 공격은 `A * sin(B * π * t)` 공식에 기반한 파동을 직선으로 방사하는 방식입니다.
    *   **파동의 위력 (A)**: 파동의 피해량과 치유량은 돌고래의 이동 거리에 비례하여 결정됩니다.
        *   위력(A) = `(현재 턴 이동거리 + 보존된 이전 턴 이동거리) * 10`
        *   즉, **많이 움직일수록** 파동의 위력이 강력해집니다.
    *   **파동의 주기 (B)**: 플레이어가 직접 숫자를 입력하여 파동의 주기를 조절합니다. 이 값에 따라 파동의 '마루'와 '골'의 위치가 결정됩니다.

*   **파동의 효과**:
    *   파동이 지나가는 경로의 특정 지점(마루와 골)에 있는 유닛에게 효과가 발동됩니다.
    *   **마루 (`sin(...) = +1`)**: 해당 위치에 있는 유닛의 체력을 **A만큼 치유**합니다.
    *   **골 (`sin(...) = -1`)**: 해당 위치에 있는 유닛에게 **A만큼의 피해**를 줍니다.

*   **특수 능력: "보존" (실력 보상 시스템)**
    *   만약 파동 공격이 의도한 대로 **아군만 치유하고 적군만 공격**하는 '깔끔한 샷'에 성공했을 경우, 해당 턴에 이동했던 거리가 "보존"됩니다.
    *   "보존"된 이동 거리는 **다음 턴의 위력(A) 계산에 합산**되어, 다음 턴의 공격을 훨씬 더 강력하게 만들어주는 보상으로 작용합니다.

*   **이동**:
    *   한 턴에 최대 2번까지 대각선으로 이동할 수 있습니다.
    *   이동은 파동의 위력(A)을 충전하는 가장 주된 수단입니다.
---

---

## 전사 계열

*   **유닛**: 황소, 코뿔소, 토끼, 나비
*   **공통점**: **직선적인 돌진과 강력한 물리 공격**에 특화되어 있습니다. 시간이 지남에 따라 힘을 충전하거나, 특정 조건을 만족시켜 기하급수적으로 강해지는 등 '성장'과 관련된 메커니즘을 공유합니다.

# 황소 (obj_unit_bull)

황소는 움직이지 않고 힘을 모아 '밑'을 키우고, 직선으로 돌진하며 이동한 거리를 '지수'로 삼아 폭발적인 피해를 주는 유닛입니다. 적을 처치하며 얻는 '보존' 값을 통해 시간이 지날수록 기하급수적으로 강해지는 잠재력을 가집니다.

*   **역할**: 지수형 성장 돌격 유닛 (Exponentially-scaling Charger)
*   **기본 능력치**:
    *   **기본 체력**: 500

*   **핵심 메커니즘: 지수(Exponential) 피해**
    *   황소의 공격력은 수학 공식인 **`밑 ^ 지수`** (`base ^ exponent`)에 따라 결정됩니다.
    *   **밑 (Base) 충전**:
        *   황소가 자신의 턴에 움직이지 않고 대기하면, **상대방의 턴이 종료될 때마다 '밑' 수치가 1씩 영구적으로 증가**합니다.
    *   **지수 (Exponent) 누적**:
        *   '지수' 값은 `(이번 돌진 거리 - 1) + (이전에 "보존"된 총 돌진 거리)`로 계산됩니다.

*   **공격 방식: 돌진 (Charge)**
    *   공격 시, 목표를 향해 **직선으로 돌진**하여 경로에 있는 첫 번째 적에게 피해를 줍니다.
    *   돌진 공격 후, 황소 자신은 **100의 반동 피해**를 입습니다.

*   **특수 능력: "보존" (가속도)**
    *   돌진 공격으로 적을 **처치하는 데 성공하면**, 해당 돌진의 이동 거리가 "보존" 값으로 누적됩니다.
    *   하지만 이 "보존" 값은 영구적이지 않고, **상대방의 턴이 끝날 때마다 1씩 감소**하여 시간이 지나면 사라지는 '가속도'와 같습니다.
    *   따라서 이 효과를 최대로 활용하려면, 적을 처치한 후 빠르게 다음 돌진을 이어나가는 것이 중요합니다.

*   **이동**:
    *   체스의 '룩(Rook)'처럼 **직선(상하좌우)으로만** 움직일 수 있습니다.
---

# 코뿔소 (obj_unit_rhino)

코뿔소는 황소와 마찬가지로 지수(exponential) 공식을 따르는 강력한 돌진 유닛입니다. 하지만 황소와는 반대로, 가만히 있을 때 '지수'를, 움직일 때 '밑'을 충전하며, 한 턴에 여러 적을 꿰뚫는 '연속 돌진' 능력을 가지고 있습니다.

*   **역할**: 지수형 성장 돌격 유닛 / 연속 돌파 유닛 (Exponentially-scaling Charger / Chain Attacker)
*   **기본 능력치**:
    *   **기본 체력**: 500

*   **핵심 메커니즘: 지수(Exponential) 피해 (황소와 반대)**
    *   코뿔소의 공격력은 수학 공식인 **`밑 ^ 지수`** (`base ^ exponent`)에 따라 결정됩니다.
    *   **밑 (Base) 충전**:
        *   **공격 시 돌진한 거리**가 그대로 '밑' 값이 됩니다. 멀리서 돌진할수록 더 강력한 '밑'을 갖게 됩니다.
    *   **지수 (Exponent) 충전**:
        *   코뿔소가 자신의 턴에 움직이지 않고 대기하면, **상대방의 턴이 종료될 때마다 '지수' 수치가 1씩 영구적으로 증가**합니다.

*   **공격 방식: 돌진 (Charge)**
    *   공격 시, 목표를 향해 **직선으로 돌진**하여 경로에 있는 첫 번째 적에게 피해를 줍니다.
    *   **반동 피해**: 돌진 공격 후 자신도 피해를 입습니다. 피해량은 해당 턴의 연속 돌진 횟수에 따라 감소합니다. (첫 돌진: 100, 두/세 번째: 50, 그 이후: 25)

*   **특수 능력: "연속 돌진" (관통)**
    *   코뿔소의 핵심 능력으로, 돌진 공격 후에 즉시 **같은 방향으로 또 다른 돌진 공격을 연계**할 수 있습니다.
    *   이를 통해 한 턴에 한 라인에 있는 여러 명의 적을 차례로 꿰뚫으며 전진하는 것이 가능합니다.

*   **이동**:
    *   체스의 '룩(Rook)'처럼 **직선(상하좌우)으로만** 움직일 수 있습니다.
---

# 토끼 (obj_unit_rabbit)

토끼는 피보나치 수열을 기반으로 공격력을 충전하고, 공격 후에는 자동으로 뒤로 물러나는 '치고 빠지기(Hit-and-Run)' 전술에 특화된 유닛입니다. 위험을 회피하며 힘을 키우는 독특한 메커니즘을 가지고 있습니다.

*   **역할**: 치고 빠지기형 공격수 (Hit-and-Run Skirmisher)
*   **기본 능력치**:
    *   **기본 체력**: 500

*   **핵심 메커니즘: 피보나치(Fibonacci) 공격력**
    *   토끼의 공격력은 **피보나치 수열**(1, 1, 2, 3, 5, 8, 13...)을 따릅니다.
    *   **공격력 충전 (증가 조건)**:
        1.  자신의 턴에 **움직이지 않고 대기**하면, 다음 상대 턴 종료 시 공격력이 피보나치 수열의 다음 단계로 증가합니다.
        2.  턴 종료 시, **주변 2칸 이내에 적이 없을 경우** '안전 보너스'를 받아 공격력이 한 단계 증가합니다.
        *   (두 조건이 모두 충족되면 한 턴에 두 단계가 증가할 수도 있습니다.)
    *   **공격력 소모 (감소 조건)**:
        *   토끼가 **이동하거나 공격할 때마다** 충전했던 힘을 소모하여, 공격력이 피보나치 수열의 이전 단계로 돌아갑니다.

*   **공격 방식: 치고 빠지기 (Hit-and-Run)**
    *   직선으로 돌진하여 경로의 첫 번째 적을 공격하며, 현재의 피보나치 수만큼 피해를 줍니다.
    *   **공격 후 자동 후퇴**: 공격이 끝나면 다음과 같이 행동합니다.
        *   **적을 처치했다면, 공격 명령이 내려진 타일(즉, 적이 있던 타일)에서 2칸 뒤로 물러납니다.**
        *   **적을 처치하지 못했다면, 돌진했던 경로 상의 타일 중 공격을 시작했던 위치에서 가장 가까운 타일로 돌아갑니다.**
    *   공격 후에는 공격력이 피보나치 수열의 여러 단계만큼 크게 감소하며, 100의 반동 피해를 입습니다.

*   **이동**:
    *   체스의 '룩(Rook)'처럼 **직선(상하좌우)으로만** 움직일 수 있습니다.
---

# 나비 (obj_unit_butterfly)

나비는 '알'에서 시작하여 '애벌레' → '번데기' → '나비'로 이어지는 완전변태를 거치는 유닛입니다. 변태 위치와 시점에 따라 성능이 극적으로 변화하며, 수명이 다하면 다시 알로 돌아가 윤회하는 독특한 메커니즘을 가집니다.

*   **역할**: 성장 및 변신 유닛 / 위치 기반 후반 공격수 (Transformation / Positional Finisher)
*   **초기 체력**: 1 (모든 단계 시작 시)

---

### **핵심 메커니즘: 생장과 윤회 (Life Cycle & Rebirth)**

#### 1단계: 애벌레 (Worm)
*   **체력**: 1
*   **이동 방식**: 직선(상하좌우)으로 최대 2칸까지 이동 가능합니다.
*   **부화**: '알' 상태에서 주변에 다른 유닛이 없으면 '애벌레'로 부화합니다.
*   **역할**: 특별한 능력은 없으며, 다음 단계인 '번데기'로 변태하기 위해 최적의 위치를 찾아 이동하는 역할을 합니다.

#### 2단계: 번데기 (Cocoon)
*   **체력**: 1
*   **이동 방식**: 이동이 불가능합니다.
*   **변태 조건**: **주변 3칸 이내**에 다른 유닛이 없는 고립된 위치에 도달하면, 이동이 불가능한 '번데기'가 되며 **방어력 2**를 얻습니다.
*   **충전과 성장**: 번데기는 나비로 우화하기 위해 몇 턴간 '충전'하며, 이 충전한 턴 수는 최종 형태의 **체력, 수명, 그리고 공격력**에 막대한 영향을 미칩니다.
*   **위치에 따른 성장 전략 (핵심)**:
    *   **가장자리 변태**: 필요한 충전 시간이 **짧아** 나비가 빨리 나오지만, 충전량이 적어 **체력이 낮고 수명이 짧은 나비**가 됩니다. (빠른 기습용)
    *   **중앙 변태**: 필요한 충전 시간이 **길어** 위험에 더 오래 노출되지만, 충전량이 많아 **체력이 높고 수명이 긴 강력한 나비**가 됩니다. (후반 에이스용)

#### 3단계: 나비 (Butterfly)
*   **우화**: 충전을 마친 번데기는 최종 형태인 '나비'가 됩니다.
*   **체력과 수명**:
    *   체력: 최대 체력 = **(번데기였던 턴 수) * 100**
    *   활동 가능 턴 수(수명) = **번데기였던 턴 수**
*   **이동 방식**: 직선(상하좌우)으로 이동하며, 이동과 연계된 특수 공격(돌진 또는 휩쓸기)을 사용합니다.
*   **공격 방식: 직선 돌진 / 휩쓸기 (Charge / Swipe Attack)**
    *   나비는 자신의 현재 위치에서 상하좌우 **직선 방향으로 돌진**하여 공격합니다.
    *   이 공격은 경로상의 적들을 타격하며, 공격력은 나비의 나이와 맵 상의 위치에 따라 특별히 계산됩니다.
    *   **특수 이동: 장애물 뛰어넘기**: 나비는 **지나갈 수 없는 한 칸을 뛰어넘어 이동하거나 공격**할 수 있습니다. 이때, 뛰어넘은 칸의 중앙에 적 유닛이 위치해 있다면, 그 **뛰어넘은 적 유닛에게도 공격**을 가할 수 있습니다.
*   **공격력 계산 방식**: 나비의 공격력은 두 가지 요소의 곱으로 결정됩니다.
    1.  **기본 공격력 (최후의 불꽃)**: `(현재 체력) * tan(90도 * 현재 나이 / (총 수명 + 2))` 라는 복잡한 삼각함수 공식을 따릅니다. 이 공식의 핵심은 나비가 **수명이 다할수록 '기본 공격력'이 기하급수적으로 증폭**되는 '최후의 불꽃' 특성을 만든다는 것입니다.
    2.  **위치 보너스 (증폭)**: 위에서 계산된 기본 공격력에 **맵의 가로 중앙으로부터 떨어진 칸 수만큼의 배율**이 추가로 적용됩니다. 즉, 가장자리에 있을수록 최종 공격력이 극대화됩니다.
*   **소멸과 윤회**: 정해진 수명이 다하면, 나비는 '알(Egg)'이 되어 생장 주기를 다시 시작합니다.

#### 0단계: 알 (Egg)
*   **체력**: 1
*   **이동 방식**: 이동이 불가능합니다.
*   나비가 수명을 다한 형태로, **체력 1, 방어력 1**을 가집니다. 주변에 다른 유닛이 없으면 다시 '애벌레'로 부화하여 생장 주기를 반복합니다.
---

---

## 저격수 계열

*   **유닛**: 카멜레온, 두꺼비, 대나무, 말벌
*   **공통점**: **원거리에서 정밀하고 계산된 공격**을 수행합니다. 기하학(각도, 교차점)이나 수학적 함수를 이용하여 공격 범위를 결정하는 등, 높은 수준의 조준과 계산 능력을 요구합니다.

# 카멜레온 (obj_unit_cameleon)

> 잃은 체력에 비례한 피해를 주며, 기하학적인 '빗겨치기'로 다수의 적을 공격하는 원거리 처형 전문가입니다.

---

### 1. 역할 (Role)
*   **주 역할**: 원거리 처형 전문가 (Ranged Executioner)
*   **부 역할**: 광역 공격수 (Area-of-Effect Nuker)

### 2. 기본 능력치 (Base Stats)
*   **체력**: 200
*   **공격력**: 고정 수치가 아니며, 아래 '능력 상세'의 계산식에 따라 결정됩니다.

### 3. 이동 (Movement)
*   **이동 방식**: 상하좌우(직선)로 1칸씩만 이동할 수 있습니다.
*   **이동 제약**: 인접한 빈 타일로만 이동 가능합니다.

### 4. 핵심 메커니즘 (Core Mechanics)
> 카멜레온은 직접적인 공격보다, 플레이어가 지정한 '기울기'에 따라 발사되는 광선으로 적을 공격합니다. 이 광선은 경로상의 적뿐만 아니라, 경로에 스치는 적까지 공격하는 독특한 메커니즘을 가집니다.

*   **처형(Execution) 피해**: 대상의 **잃은 체력**(`최대 체력 - 현재 체력`)에 비례하여 피해량이 증가합니다. 체력이 많이 닳은 적일수록 더 큰 피해를 입힙니다.
*   **왕의 가호 (Positional Bonus)**: 아군 왕으로부터 **5칸** 이내에 있는 적을 공격할 시, **100**만큼의 추가 피해를 입힙니다.
*   **천적 관계 (Specific Weakness)**: '전사(Warrior)' 타입의 유닛에게 공격받을 경우, 피해량과 상관없이 즉시 처치됩니다.

### 5. 능력 상세 (Abilities)

#### 특수 능력: 광선 빗겨치기 (Ray Trick Shot)
*   **능력명**: 빗겨치기
*   **발동 조건**: 공격 명령 시, 플레이어가 직접 숫자를 입력하여 광선의 '기울기'(벡터)를 지정합니다.
*   **효과**:
    1.  지정된 기울기로 유닛 위치에서부터 광선(Ray)을 발사합니다.
    2.  광선 경로상에서 처음으로 **정면으로 충돌하는 적** 1명을 공격합니다.
    3.  또한, 광선 경로에 **접선 형태로 스치는(grazing) 모든 적**에게 '빗겨치기' 판정으로 추가 피해를 줍니다.
*   **피해량 공식**: `(광선과 대상의 거리(칸 수) * 0.1) * (대상의 잃은 체력)`

### 6. 비고 (Notes)
*   '빗겨치기'는 기하학적 계산을 통해 이뤄지므로, 정확한 각도를 계산하면 한 번의 공격으로 여러 적을 동시에 타격할 수 있어 높은 숙련도를 요구합니다.
*   킹 유닛을 공격할 때는 피해량이 1로 고정됩니다.
---

# 두꺼비 (obj_unit_toad)

> 필드 가장자리의 '조준 마커'들을 이용해 두 개의 선을 정의하고, 그 교차점에 폭발을 일으켜 잃은 체력 비례 피해를 주는 기하학적 공격 유닛입니다.

---

### 1. 역할 (Role)
*   **주 역할**: 기하학적 광역 공격수 (Geometric AoE Attacker)
*   **부 역할**: 처형 전문가 (Execution Specialist)

### 2. 기본 능력치 (Base Stats)
*   **체력**: 200
*   **공격력**: 고정 수치가 아니며, 아래 '능력 상세'의 계산식에 따라 결정됩니다.

### 3. 이동 (Movement)
*   **이동 방식**: 상하좌우(직선)로 1칸씩만 이동할 수 있습니다.
*   **이동 제약**: 인접한 빈 타일로만 이동 가능합니다.

### 4. 핵심 메커니즘 (Core Mechanics)
> 두꺼비의 공격은 총 3개의 점(두꺼비 자신, 플레이어가 선택한 조준 마커 1개, 그리고 다른 조준 마커 2개)을 이용하여 두 개의 가상 직선을 만들고, 그 직선들의 교차점을 타격하는 매우 독특한 방식입니다.

*   **3점 교차점 공격**: 공격 지점은 아래 두 선의 **교차점**으로 결정됩니다.
    1.  **선 1**: 두꺼비 유닛의 위치에서 플레이어가 클릭한 **조준 마커**까지 이어지는 선
    2.  **선 2**: 필드 위의 **다른 조준 마커 두 개**를 서로 잇는 선
*   **처형(Execution) 피해**: 기본 공격은 대상의 **잃은 체력**(`최대 체력 - 현재 체력`)에 **0.5**를 곱한 만큼 피해를 줍니다. (예: 잃은 체력 100일 경우 50 피해)
*   **완벽한 공격 보너스 (Perfect Shot Bonus)**: 계산된 교차점에 적 유닛이 정확히 존재하고, 두꺼비로부터 **5칸** 이내이며, 아군 왕과 같은 진영에 있을 경우, **100**만큼의 추가 고정 피해를 입힙니다.
*   **천적 관계 (Specific Weakness)**: '전사(Warrior)' 타입의 유닛에게 공격받을 경우, 피해량과 상관없이 즉시 처치됩니다.
*   **킹 유닛 공격 불가**: 킹 유닛에게는 직접적인 공격 피해를 줄 수 없습니다.

### 5. 능력 상세 (Abilities)

#### 특수 능력: 기하학적 폭발 (Geometric Explosion)
*   **능력명**: 기하학적 폭발
*   **발동 조건**: 공격 명령 시, 플레이어가 필드 가장자리에 있는 여러 개의 **조준 마커** 중 하나를 클릭하여 공격 방향을 지정합니다.
*   **효과**: 시스템은 (두꺼비↔클릭된 마커)를 잇는 선과 (다른 마커 2개)를 잇는 선의 교차점을 계산하여 그 지점에 폭발을 일으킵니다. 해당 위치의 적에게 피해를 주며, 정확히 명중 시 '완벽한 공격 보너스'가 적용됩니다.
*   **피해량 공식**: (대상 유닛이 잃은 체력 * 0.5) + (조건 충족 시 완벽한 공격 보너스 100)

### 6. 비고 (Notes)
*   이 유닛은 공격의 효율을 극대화하기 위해 3개의 조준점 위치를 고려하는 높은 수준의 기하학적 사고가 요구됩니다.
*   킹 유닛은 두꺼비의 주요 공격 대상에서 제외됩니다.

### 7. 연계 오브젝트 (Associated Objects)

#### 조준 마커 (obj_aim_marker)
*   **역할**: 두꺼비의 공격 좌표를 정하기 위한 조준점입니다.
*   **특징**:
    *   필드 가장자리에 배치되어 있습니다.
    *   플레이어는 마커를 클릭하여 드래그할 수 있지만, 이동 범위는 초기 위치에서 **2칸**으로 제한됩니다.
    *   마커는 필드 외곽선에 달라붙는(snap) 특징이 있어, 플레이어는 필드 밖에서 안으로 향하는 공격 각도를 설정하게 됩니다.
---

# 대나무 (obj_unit_bamboo)

> 이동할 수 없는 대신, 매 턴 성장하며 지정한 위치에 강력한 공격을 하거나 자신을 복제한 '새끼 대나무'를 심는 공성/방어 유닛입니다.

---

### 1. 역할 (Role)
*   **주 역할**: 지역 통제 (Area Control) / 증식형 스포너 (Spawner)
*   **부 역할**: 고정 포대 (Stationary Turret)

### 2. 기본 능력치 (Base Stats)
*   **체력**: 10 (매 턴 공식에 따라 계속 성장)
*   **공격력**: 150 (고정)

### 3. 이동 (Movement)
*   **이동 방식**: 없음. 대나무는 한 번 배치되면 움직일 수 없습니다.

### 4. 핵심 메커니즘 (Core Mechanics)
> 대나무는 움직이지 않는 대신, 시간이 지날수록 점점 강해지며 원거리 공격과 증식을 동시에 수행하여 전장을 장악합니다.

*   **성장**: 매 턴이 끝날 때마다 자신의 위치와 게임의 총 경과 턴에 비례하여 체력과 최대 체력이 영구적으로 증가합니다.
*   **공격 또는 증식**: 대나무의 핵심 능력으로, 플레이어가 지정한 좌표에 다음 두 가지 행동 중 하나를 수행합니다.
    1.  **공격**: 목표 지점에 적이 있다면, **150**의 고정 피해를 입힙니다.
    2.  **증식**: 목표 지점이 비어 있다면, 그곳에 새로운 '새끼 대나무'를 생성합니다.
*   **새끼 대나무**: 증식으로 생성된 중립 유닛입니다. 스스로 행동할 순 없지만, 어미처럼 매 턴 '성장'하여 체력이 늘어나는 강력한 장애물이 됩니다. 초기 체력은 어미의 현재 체력과 거리에 따라 결정됩니다.
*   **추가 증식 기회**: 기본 공격 시 특정 조건(5칸 내에 적 존재)이 충족되면, 추가 턴을 얻어 새끼 대나무를 즉시 한 번 더 심을 수 있는 기회를 얻습니다.
*   **천적 관계 (Specific Weakness)**: '전사(Warrior)' 타입의 유닛에게 공격받을 경우, 체력과 상관없이 즉시 처치됩니다.

### 5. 능력 상세 (Abilities)

#### 주 능력: 공격 / 증식 (Attack / Spawn)
*   **능력명**: 공격 / 증식
*   **발동 조건**: 공격 명령 시, 플레이어가 공격/증식할 좌표(x, y)를 직접 입력합니다. 사거리는 **5칸**으로 제한됩니다.
*   **효과**: 목표 지점의 상태에 따라 공격 또는 증식 로직이 발동됩니다.

### 6. 비고 (Notes)
*   '추가 증식 기회' 시, 현재 구현상 최대 2개까지의 새끼 대나무를 생성할 수 있습니다. `BAMBOO_BONUS_COUNT` 상수는 이러한 최대 개수(`2개`)를 나타냅니다.
*   '전사' 타입의 공격에 항상 즉사합니다.
---

# 말벌 (obj_unit_hornet)

> 플레이어가 직접 3차 함수를 설계하여 비행 경로를 만들고, 그 경로를 따라 비행하며 점점 강해지는 피해를 입히거나, 스스로를 희생해 큰 피해를 주는 초고난도 유닛입니다.

---

### 1. 역할 (Role)
*   **주 역할**: 스케일링 처형 전문가 (Scaling Executioner)
*   **부 역할**: 수학적 스킬샷 유닛 (Mathematical Skill-shot Unit)

### 2. 기본 능력치 (Base Stats)
*   **체력**: 200
*   **공격력**: 0에서 시작하여 '곡선 비행' 중에 계속 증가합니다.

### 3. 이동 (Movement)
*   **이동 방식**: 일반적인 이동 능력이 없으며, 이동 자체가 공격의 일부로만 존재합니다.

### 4. 핵심 메커니즘 (Core Mechanics)
> 말벌은 수학적 계산과 두뇌 플레이를 극한으로 요구하는 유닛입니다. 플레이어의 함수 설계 능력에 따라 유닛의 성능이 극적으로 달라집니다.

*   **3차 함수 경로**: 주 공격은 플레이어가 직접 3차 함수 `y = Ax³ + Bx² + Cx + D`를 설계하여 말벌이 비행할 경로를 결정해야 합니다. 이 경로는 반드시 말벌의 현재 위치를 지나야만 합니다.
*   **스케일링 처형 피해**: '곡선 비행' 시, 비행 거리가 길어지고 경로의 극점을 통과할수록 공격력 수치가 증폭됩니다. 이 공격력은 대상의 **잃은 체력**에 비례한 피해량의 계수(%)로 사용됩니다.
*   **자폭 공격**: 보조 공격으로, 가까운 적에게 자신의 현재 체력만큼 피해를 주고 자신은 소멸하는 자폭 공격을 할 수 있습니다.

### 5. 능력 상세 (Abilities)

#### 특수 능력 1: 곡선 비행 (Curve Swipe)
*   **능력명**: 곡선 비행
*   **발동 조건**:
    1.  플레이어가 3차 함수 `y = Ax³ + Bx² + Cx + D`의 계수(A, B, C, D)를 입력합니다.
    2.  입력된 함수가 현재 말벌의 위치를 정확히 지나는 경우에만 발동됩니다.
*   **효과**:
    *   말벌이 생성된 곡선 경로를 따라 비행을 시작합니다.
    *   비행하는 동안 공격력 수치(`unit_atk`)가 한 스텝당 기본 **5**씩 증가합니다. 또한, 3차 함수의 극점(최대 2개)을 지날 때마다 증가량이 **5**씩 추가되어, 한 스텝당 최대 **15**까지 증가할 수 있습니다. 이렇게 증가한 공격력은 대상의 **잃은 체력**에 비례한 피해량의 계수(%)로 사용됩니다.

#### 특수 능력 2: 자폭 (Self-Destruct)
*   **능력명**: 자폭
*   **발동 조건**: 5칸 이내의 적을 대상으로 선택합니다.
*   **효과**: 대상에게 돌진하여 자신의 **현재 체력**과 동일한 피해를 주고, 자신은 즉시 소멸합니다.

### 6. 비고 (Notes)
*   매우 높은 난이도를 가진 유닛으로, 3차 함수에 대한 이해가 없으면 주력기인 '곡선 비행'을 사용하기 어렵습니다.
*   '곡선 비행'으로 축적된 공격력은 턴이 지나면 초기화되므로, 매 턴 새롭게 경로를 계산하고 비행해야 합니다.
---

---

## 암살자 계열

*   **유닛**: 두더지, 원숭이, 해파리, 공작
*   **공통점**: **'은신'을 활용한 기습과 치고 빠지기**에 특화되어 있습니다. 적의 탐지 범위(2칸)를 피해 숨어 있다가, 유리한 위치를 선점하여 강력한 한 방을 노리는 고위험 고보상 플레이 스타일을 가집니다.

### 암살자 계열 공통 메커니즘: 은신 및 감지

모든 유닛은 '은신(Hidden)' 상태가 될 수 있습니다. 은신이 발동하는 기본 조건은 다음과 같습니다.

1.  **감지 거리**: 모든 유닛은 각자의 '계열'에 따라 고유한 감지 거리를 가집니다. 적 유닛이 자신의 감지 거리 안에 들어오지 않으면, 해당 적은 보이지 않는 '은신' 상태로 취급됩니다.
2.  **진영 시야**: 기본적으로 맵의 절반을 기준으로, 아군 진영이 있는 쪽의 시야만 확보됩니다. 적이 반대편 진영에 있다면 감지 거리와 상관없이 은신 상태가 됩니다.

#### 계열별 감지 거리
*   **암살자 계열**: 2칸
*   **저격수 계열**: 5칸
*   **병사 계열**: 0칸 (감지 능력 없음)
*   **이외 계열**: 1칸

---


# 두더지 (obj_unit_mole)

> 적의 시야에서 벗어나 '은신' 상태가 되면 기동성이 폭발적으로 증가하며, 땅굴을 파고 들어가 적을 급습한 뒤 조건부로 복귀하는 '치고 빠지기'에 특화된 암살자 유닛입니다.

---

### 1. 역할 (Role)
*   **주 역할**: 암살자 (Assassin)
*   **부 역할**: 기동형 공격수 (Skirmisher)

### 2. 기본 능력치 (Base Stats)
*   **체력**: 150
*   **공격력**: 100 (광역)

### 3. 이동 (Movement)
*   **이동 방식**: '땅굴 파기'를 통해 이동하며, 이동과 공격이 결합되어 있습니다. 이동 가능 범위는 '은신' 상태에 따라 결정됩니다.

### 4. 핵심 메커니즘 (Core Mechanics)
> 두더지의 핵심은 '은신'의 성공 여부입니다. 은신에 성공하면 암살자로서의 잠재력이 극대화되며, 실패 시에는 제한적인 행동만 가능합니다.

*   **은신 (Stealth)**: 턴 시작 시 적에게 발각되었는지 여부에 따라 상태가 결정됩니다.
    *   **발각됨**: 수평/수직으로만 **2칸** 이동 및 공격이 가능합니다.
    *   **은신**: 이동/공격 범위가 최대 **4칸**으로 증가하고 **대각선** 이동이 추가되어, 위협 범위가 대폭 향상됩니다.
*   **땅굴 파기 공격 (Burrow Attack)**: 목표 지점으로 땅을 파고 들어가, 해당 타일에 있는 모든 적에게 **100**의 광역 피해를 줍니다.
*   **치고 빠지기 (Hit-and-Run)**: 공격 후, 다음 조건 중 하나라도 만족하면 즉시 원래 위치로 복귀합니다.
    1.  목표 타일의 적 유닛이 한 명이라도 살아남았을 경우.
    2.  목표 타일에 아군 또는 중립 유닛이 존재할 경우.
    *   (성공적으로 위치를 옮기려면, 목표 타일의 모든 적을 처치하고 해당 타일이 비어있어야 합니다.)

### 5. 능력 상세 (Abilities)

#### 주 능력: 땅굴 파기 (Burrow)
*   **능력명**: 땅굴 파기
*   **발동 조건**: '은신' 또는 '발각됨' 상태에 따라 정해진 범위 내의 타일을 선택합니다.
*   **효과**: 목표 지점으로 땅굴을 파고 이동하여 광역 피해를 주고, '치고 빠지기' 조건에 따라 원래 위치로 복귀하거나 자리를 잡습니다.

### 6. 비고 (Notes)
*   은신 상태를 유지하며 적의 핵심 유닛을 효과적으로 암살하는 것이 이 유닛의 주된 운용 방식입니다.
*   시각적으로 땅굴을 팔 때 사라졌다가 나타나는 연출과 함께 흙먼지 효과가 발생하여 잠행의 느낌을 강조합니다.
---

# 원숭이 (obj_unit_monkey)

> 은신을 통해 기동성을 확보하고, 보이지 않는 2차 함수 궤도의 '해'에 해당하는 정확한 위치에서 포물선 공격을 성공시키면 보상을, 실패하면 페널티를 받는 고난도 암살자 유닛입니다.

---

### 1. 역할 (Role)
*   **주 역할**: 암살자 (Assassin)
*   **부 역할**: 스킬샷 기반 공격수 (Skill-shot Nuker)

### 2. 기본 능력치 (Base Stats)
*   **체력**: 100
*   **공격력**: 150

### 3. 이동 (Movement)
*   **이동 방식**: 턴당 1회의 기본 이동을 할 수 있으며, 이동 후 공격이 가능하도록 추가 행동권을 얻습니다.
    *   **발각 상태**: 1칸 이내의 인접한 칸으로 이동합니다.
    *   **은신 상태**: 2칸 또는 3칸 떨어진 위치로 도약하듯 이동합니다.

### 4. 핵심 메커니즘 (Core Mechanics)
> 원숭이는 은신을 통한 기동성과, 수학적 계산에 기반한 독특한 투사체 공격을 결합한 유닛입니다. 하이리스크 하이리턴의 정교한 플레이가 요구됩니다.

*   **은신 (Stealth)**: '두더지' 유닛처럼, 턴 시작 시 적에게 발각되지 않으면 '은신' 상태가 되어 2~3칸의 향상된 기동성을 얻습니다. 발각 시에는 1칸만 이동할 수 있습니다.
*   **2차 함수 자세 (Quadratic Stance)**: 원숭이는 보이지 않는 2차 함수(`y = Ax² + Bx + C`)를 '자세'로 가집니다. 이 함수의 '해(root)'가 되는 맵 상의 특정 좌표 두 곳이 존재합니다.
*   **고위험 고보상 공격**: 공격의 성공 여부는 원숭이의 위치에 따라 결정됩니다.
    *   **공격 성공**: 원숭이가 자신의 '2차 함수 자세'의 '해' 중 한 곳에 서서 공격하면, 포물선으로 날아가는 바나나를 던져 **150**의 피해를 주고, 자신은 **50**의 체력을 회복합니다.
    *   **공격 실패**: 만약 유효하지 않은 위치에서 공격을 시도하거나 공격이 빗나가면, 자신에게 **70**의 피해를 페널티로 받습니다.

### 5. 능력 상세 (Abilities)

#### 주 능력: 포물선 투척 (Parabolic Throw)
*   **능력명**: 포물선 투척
*   **발동 조건**:
    1.  유닛이 자신의 '2차 함수 자세'에 맞는 두 개의 '해' 좌표 중 한 곳에 위치해야 합니다.
    2.  플레이어는 공격할 방향(상하좌우)을 선택합니다.
*   **효과**: 바나나를 포물선 궤적으로 던져 적을 타격합니다. 성공 시 보상, 실패 시 페널티가 적용됩니다. 경로에 있는 특정 높이 이상의 대나무 유닛에 의해 투사체가 가로막힐 수 있습니다.

### 6. 비고 (Notes)
*   매 턴 자신의 '2차 함수 자세'와 그 '해'의 위치를 파악하고, '은신'을 이용해 그곳으로 이동한 뒤 공격하는 정교한 운영이 필요합니다.
---

# 해파리 (obj_unit_jellyfish)

> 자신의 위치를 복소수(a+bi)로 표현하며, 플레이어가 입력한 다른 복소수와의 곱셈을 통해 차원을 넘나드는 유닛. 다른 차원에 머무는 동안 공격력을 축적하고, 현실로 복귀할 때 강력한 광역 폭발을 일으킵니다.

---

### 1. 역할 (Role)
*   **주 역할**: 광역 누커 (Area-of-Effect Nuker)
*   **부 역할**: 수학적 기동 유닛 (Mathematical Maneuver Unit)

### 2. 기본 능력치 (Base Stats)
*   **체력**: 150
*   **공격력**: 0 (기본). '차원 이동' 상태에서 축적됩니다.

### 3. 이동 (Movement)
*   **이동 방식**: 그리드 위에 있을 때, 인접한 8방향으로 1칸씩 자유롭게 이동할 수 있습니다.

### 4. 핵심 메커니즘 (Core Mechanics)
> 해파리는 체스판을 복소평면으로 간주하여 움직입니다. 플레이어의 복소수 연산 능력에 따라 생존과 공격력이 결정되는, 극도로 높은 이해도를 요구하는 유닛입니다.

*   **복소수 좌표**: 해파리의 위치는 복소수 `z = x + iy`로 표현됩니다. `y`가 0일 때만 그리드(현실)에 존재합니다.
*   **차원 이동 (Phase Shift)**: 플레이어가 입력한 복소수 `w`와 현재 위치 `z`의 곱셈 `z' = z * w` 결과에 따라 상태가 바뀝니다.
    *   **현실 → 차원 이동**: 곱셈 결과의 허수부가 0이 아니거나 실수부가 정수가 아니면, 해파리는 무적 상태로 다른 차원으로 사라집니다.
    *   **차원 이동 → 현실**: 다른 차원에 있는 동안, 곱셈 결과의 허수부가 0이 되고 실수부가 정수가 되면, 해파리는 해당 좌표의 그리드로 복귀하며 '차원 폭발'을 일으킵니다.
*   **공격력 축적**: '차원 이동' 상태로 한 턴을 보낼 때마다 공격력이 **100**씩 계속 축적됩니다.
*   **소멸 카운트**: '차원 이동' 상태는 최대 **3턴**까지만 유지할 수 있으며, 그 안에 현실로 복귀하지 못하면 소멸합니다.

### 5. 능력 상세 (Abilities)

#### 주 능력: 차원 도약 (Complex Shift)
*   **능력명**: 차원 도약
*   **발동 조건**: 그리드 위에서 '차원 도약' 명령을 선택합니다.
*   **효과**: 숫자패드가 나타나며, 현재 위치와 곱할 복소수의 실수부(n)와 허수부(i)를 입력받습니다. 입력된 값에 따라 다음 턴에 해파리의 위치와 상태가 결정됩니다.

#### 자동 발동 능력: 차원 폭발 (Dimensional Explosion)
*   **능력명**: 차원 폭발
*   **발동 조건**: 해파리가 '차원 이동' 상태에서 그리드로 성공적으로 복귀할 때 자동으로 발동됩니다.
*   **효과**: 착지 지점을 중심으로 원형의 광역 폭발을 일으킵니다.
    *   **범위**: 기본 반경은 **2칸**입니다. 단, 2칸 이내에 적이 있을 경우, 가장 가까운 적까지의 거리로 범위가 축소됩니다.
    *   **피해량**: '차원 이동' 중에 축적한 총 공격력과 같습니다.
    *   공격 후, 축적된 공격력은 0으로 초기화됩니다.

### 6. 비고 (Notes)
*   복소수 곱셈에 대한 이해가 없으면 유닛을 제대로 조작하는 것이 거의 불가능합니다.
*   예를 들어, 현재 위치가 `z=2`일 때, `w=i`를 입력하면 다음 위치는 `z'=2i`가 되어 차원 이동 상태가 됩니다. 여기서 다시 `w=-i`를 입력하면 `z'' = 2i * -i = 2`가 되어 원래 위치로 복귀하며 공격할 수 있습니다.
---

# 공작 (obj_unit_peafowl)

> 이동 거리에 따라 공격 사거리가 달라지고, 입력한 각도에 따라 피해량이 변화하는 부채꼴 형태의 광역 공격을 사용하는 전술적 유닛입니다.

---

### 1. 역할 (Role)
*   **주 역할**: 전술적 광역 딜러 (Tactical AoE Dealer)
*   **부 역할**: 범위 조절형 공격수 (Adjustable Range Attacker)

### 2. 기본 능력치 (Base Stats)
*   **체력**: 150
*   **기본 공격력**: 25 (피해량 계산에 사용되는 기본값)

### 3. 이동 (Movement)
*   **이동 방식**: 최대 3칸 반경 내의 빈 타일로 이동할 수 있습니다.
*   **이동-공격 사거리 연계**: 이동 거리가 짧을수록 이어지는 부채꼴 공격의 사거리가 길어집니다.
    *   1칸 이동 시 → 공격 사거리 **3칸**
    *   2칸 이동 시 → 공격 사거리 **2칸**
    *   3칸 이동 시 → 공격 사거리 **1칸**

### 4. 핵심 메커니즘 (Core Mechanics)
> 공작의 핵심은 이동 거리와 공격 사거리, 그리고 공격 각도와 피해량 사이의 반비례 관계를 이해하고 최적의 조합을 찾는 것입니다.

*   **이동-공격 사거리 반비례**: 적에게 가까이 다가갈수록 공격 사거리가 줄어들고, 멀리서 공격할수록 사거리가 늘어납니다.
*   **부채꼴 광역 공격**: 이동 후, 플레이어가 지정한 각도에 맞춰 부채꼴 형태의 광역 공격을 수행합니다. 부채꼴의 중심 방향은 직전 이동 방향과 일치합니다.
*   **공격 각도-피해량 반비례**: 부채꼴의 각도가 좁을수록 피해량이 폭발적으로 증가하고, 각도가 넓을수록 피해량은 줄어듭니다.
    *   **계산식**: `기본 공격력(25) * (360 / 입력 각도)`

### 5. 능력 상세 (Abilities)

#### 주 능력: 부채꼴 공격 (Fan Attack)
*   **능력명**: 부채꼴 공격
*   **발동 조건**: 유닛 이동 후 발동 가능하며, 플레이어가 공격 각도(1~360)를 직접 입력합니다.
*   **효과**:
    *   이동 거리에 따라 결정된 사거리 내에서, 입력된 각도로 부채꼴 형태의 광역 공격을 가합니다.
    *   피해량은 각도에 반비례하여 계산됩니다.
    *   부채꼴 범위 안에 완전히 들어오는 모든 적 유닛이 피해를 입습니다.

### 6. 비고 (Notes)
*   적과의 거리, 공격 각도, 예상 피해량을 정확하게 계산해야 하는 높은 숙련도를 요구하는 유닛입니다.
*   초기에 암살자 유닛으로 은신 메커니즘이 구상되었던 흔적이 코드에 남아있지만, 현재는 기능하지 않습니다.
---

---

## 병사 계열

*   **유닛**: 고래, 판다, 물고기 떼, 거북이
*   **공통점**: **높은 체력과 방어 능력**을 바탕으로 전선을 유지하는 탱커 역할을 합니다. 대부분 공격 능력이 없거나 매우 제한적이며, 대신 피해를 나누어 받거나, 적의 공격을 무력화시키는 등 방어에 특화된 능력을 보유하고 있습니다. 전진만 가능한 제한적인 이동 방식을 공유합니다.

# 고래 (obj_unit_whale)

> 공격 능력은 없지만, 주변의 다른 고래와 피해를 나누어 받는 '피해 공유' 능력을 통해 엄청난 방어 능력을 발휘하는 탱커 유닛입니다.

---

### 1. 역할 (Role)
*   **주 역할**: 탱커 (Tank) / 피해 분산 (Damage Soak)
*   **부 역할**: 전선 유지 (Frontline Holder)

### 2. 기본 능력치 (Base Stats)
*   **체력**: 500 (고정)
*   **공격력**: 0 (없음)

### 3. 이동 (Movement)
*   **이동 방식**: 전진형. 유닛이 향하는 방향(`toward`)으로 전방 1칸 및 전방 대각선 2칸(위/아래), 총 3방향으로만 이동할 수 있습니다.
*   **방향 전환**: 맵의 끝에 도달하면 `toward` 변수의 값이 반전되어 반대 방향으로 향하게 됩니다.

### 4. 핵심 메커니즘 (Core Mechanics)
> 고래는 단독으로는 약하지만, 여러 마리가 뭉쳤을 때 피해를 공유하며 생존력이 극대화되는 독특한 방어 메커니즘을 가집니다.

*   **피해 공유 (Damage Sharing)**: 고래의 가장 핵심적인 능력입니다.
    *   피해를 받으면, 3칸 범위 내에 있는 모든 아군 고래가 그 피해를 균등하게 나누어 받습니다.
    *   이 능력의 범위는 유닛이 공격받을 때 점선 원으로 시각적으로 표시됩니다.

*   **조건부 회복 (Conditional Healing)**:
    *   피해를 입을 때마다 `heal_stack`이 1씩 누적됩니다.
    *   피해를 공유하는 그룹 내 모든 고래의 `heal_stack` 총합이 3 이상이 되면, 그룹 내 모든 고래의 스택이 초기화되고, 각자 10만큼 체력을 회복합니다.

### 5. 능력 상세 (Abilities)

#### 주 능력: 피해 공유 (Passive)
*   **능력명**: 피해 공유
*   **발동 조건**: 유닛이 피해를 입을 때 자동으로 발동합니다.
*   **효과**: 3칸 범위 내의 아군 고래들과 받은 피해를 나눠 입습니다. 이로 인해 단일 대상에게 가해지는 강력한 공격을 여러 개체가 흡수하여 버틸 수 있습니다.

#### 특별 능력: 돌파 (Stale Breaker)
*   **능력명**: 돌파 (Stale Breaker)
*   **발동 조건**: 게임이 교착 상태(아군에게 공격 유닛이 하나도 없는 상황)에 빠졌다고 판단될 때, 시스템에 의해 일시적으로 부여됩니다.
*   **효과**: 평소에는 없는 공격 능력이 생깁니다. 공격 시, **자신의 현재 체력과 대상의 현재 체력 중 더 큰 값**을 피해량으로 하여 공격합니다. 이 능력은 방어적인 고래가 게임을 진행시키기 위해 장애물을 제거할 수 있도록 하는 최후의 수단입니다.

### 6. 비고 (Notes)
*   개별 개체는 지정된 체력 이상의 피해를 받으면 쉽게 파괴되지만, 여러 마리가 뭉칠수록 사실상 체력이 배가 되어 기하급수적으로 단단해집니다.
*   공격 능력이 전혀 없으므로, 다른 공격 유닛과의 조합이 필수적입니다. 전선을 형성하고 다른 유닛을 보호하는 데 최적화되어 있습니다.
*   교착 상태에서는 강력한 '돌파' 공격을 할 수 있는 잠재력이 있습니다.
---

# 판다 (obj_unit_panda)

> 공격 능력은 없지만, 매우 높은 체력을 바탕으로 전선을 막아서는 퓨어 탱커입니다. 이동 시 몸을 굴리는 독특한 애니메이션이 특징입니다.

---

### 1. 역할 (Role)
*   **주 역할**: 탱커 (Tank) / 길목 차단 (Blocker)
*   **부 역할**: 전선 유지 (Frontline Holder)

### 2. 기본 능력치 (Base Stats)
*   **체력**: 1500 (고정)
*   **공격력**: 0 (없음)

### 3. 이동 (Movement)
*   **이동 방식**: 전진형. 유닛이 향하는 방향(`toward`)으로 전방 1칸 및 전방 대각선 2칸(위/아래), 총 3방향으로만 이동할 수 있습니다.
*   **방향 전환**: 맵의 끝에 도달하면 `toward` 변수의 값이 반전되어 반대 방향으로 향하게 됩니다.
*   **구르기 (Rolling)**: 이동 명령을 받으면, 제자리에서 몸을 굴리며 목표 지점까지 이동하는 독특한 애니메이션을 보여줍니다. 다른 유닛보다 이동 속도가 느립니다.

### 4. 핵심 메커니즘 (Core Mechanics)
> 판다는 다른 특별한 능력 없이 오로지 1500이라는 압도적인 체력 하나만으로 전선을 버티는 데 특화된 유닛입니다.

*   **높은 체력 (High Health)**: 게임 내 최상위권의 체력을 보유하여, 적의 강력한 공격을 여러 번 받아낼 수 있는 최고의 방패 역할을 합니다.
*   **공격 불가 (No Attack)**: 기본적으로 공격 능력이 전혀 없기 때문에, 다른 공격 유닛의 보조 없이는 적을 제거할 수 없습니다.
*   **사각형 충돌 판정 (Rectangular Collider)**: 대부분의 유닛이 원형 충돌 판정을 사용하는 것과 달리, 판다는 사각형 충돌 판정을 사용합니다. 이는 판다가 길을 막거나 공간을 차지할 때 더 명확하고 단단한 블로커 역할을 수행할 수 있게 합니다.

### 5. 능력 상세 (Abilities)

#### 특별 능력: 돌파 (Stale Breaker)
*   **능력명**: 돌파 (Stale Breaker)
*   **발동 조건**: 판다와 같이 공격 능력이 없는 유닛만 필드에 남아 게임이 교착 상태(아군에게 공격 유닛이 하나도 없는 상황)에 빠졌다고 판단될 때, 시스템에 의해 일시적으로 부여됩니다.
*   **효과**: 평소에는 없는 공격 능력이 생깁니다. 공격 시, **자신의 현재 체력과 대상의 현재 체력 중 더 큰 값**을 피해량으로 하여 공격합니다. 이 능력은 방어적인 판다가 게임을 진행시키기 위해 장애물을 제거할 수 있도록 하는 최후의 수단입니다.

### 6. 비고 (Notes)
*   판다의 핵심은 '체력' 그 자체입니다. 복잡한 능력 없이 단순하지만 강력한 방어 능력을 제공합니다.
*   공격 능력이 없어 다른 유닛을 지키는 역할에만 집중하며, 교착 상태에서는 강력한 한 방을 날릴 수 있는 잠재력을 가집니다.
*   이동 시 몸을 굴리는 모습이 시각적으로 매우 인상적입니다.
---

# 물고기 떼 (obj_unit_fish_horde)

> 체력이 곧 크기인 독특한 유닛으로, 여러 개체가 합쳐져 거대한 단일 유닛이 되거나, 하나의 큰 개체가 여러 개의 작은 유닛으로 '분열'하여 필드를 장악할 수 있는 스웜(Swarm) 유닛입니다.

---

### 1. 역할 (Role)
*   **주 역할**: 스웜 (Swarm) / 지역 통제 (Area Control)
*   **부 역할**: 증식 (Spawner) / 관통 공격수 (Line Attacker)

### 2. 기본 능력치 (Base Stats)
*   **초기 체력**: 400
*   **공격력**: 0 (특수 공격만 보유)

### 3. 이동 (Movement)
*   **이동 방식**: 전진형. 유닛이 향하는 방향(`toward`)으로 전방 1칸 및 전방 대각선 2칸(위/아래), 총 3방향으로만 이동할 수 있습니다.

### 4. 핵심 메커니즘 (Core Mechanics)
> 물고기 떼의 모든 것은 '체력 = 크기'라는 공식으로 귀결됩니다. 체력이 변하면 유닛의 물리적인 크기(충돌 범위)도 함께 변하며, 이를 이용해 합치고 분열하며 필드를 지배합니다.

*   **크기 = 체력 (Size = Health)**: 이 유닛의 체력(`unit_value`)은 곧 무리의 크기를 의미합니다. 체력이 높을수록 유닛의 충돌 반경(`unit_radius`)도 커지고, 체력이 낮아지면 크기도 작아집니다. 피해를 입으면 무리의 규모가 줄어드는 것이 시각적으로 표현됩니다.
*   **그룹 판정 (Grouping)**: 매 턴 시작 시, 근처에 있는 아군 물고기 떼들은 자동으로 하나의 '그룹'으로 인식됩니다. 이 그룹 판정은 어떤 유닛과 합치기가 가능한지 결정하는 기반이 됩니다.
*   **합치기 (Merge)**: 같은 그룹으로 판정된 아군 물고기 떼 위로 이동하여 합칠 수 있습니다. 이동한 유닛의 체력은 목표 유닛에게 모두 흡수되며, 목표 유닛은 그만큼 더 커지고 강해집니다.
*   **분열 (Split)**: 체력이 200 이상일 때, 자신의 위치에 '분열' 명령을 내릴 수 있습니다. 사거리 내의 비어있는 타일을 선택하면, 원하는 만큼의 체력을 떼어내 새로운 물고기 떼를 생성할 수 있습니다.

### 5. 능력 상세 (Abilities)

#### 주 능력 1: 관통 공격 (Swipe Attack)
*   **능력명**: 관통 공격 (`order_fish_horde_swipeatk`)
*   **발동 조건**: 공격 가능한 적 타일로 이동 시 발동합니다.
*   **효과**: 출발 지점에서 목표 지점까지 직선으로 이동하며, 경로 상에 있는 모든 적을 타격합니다. 경로에 아군이나 중립 유닛이 있으면 그 앞에서 멈춥니다. 이 공격은 `돌파` 능력과 유사한 메커니즘을 사용하여 대상을 타격하는 것으로 보입니다.

#### 주 능력 2: 합치기 / 분열 (Merge / Split)
*   **능력명**: 합치기 / 분열
*   **발동 조건**:
    *   **합치기**: 같은 그룹의 아군 물고기 떼 타일로 이동 시 발동합니다.
    *   **분열**: 체력이 200 이상일 때, 제자리에서 행동을 선택하여 발동합니다.
*   **효과**: 하나의 거대한 유닛을 만들어 전선을 강화하거나, 여러 개의 작은 유닛으로 필드를 넓게 장악하는 등 유연한 전략을 구사할 수 있습니다.

#### 특별 능력: 돌파 (Stale Breaker)
*   **능력명**: 돌파 (Stale Breaker)
*   **발동 조건**: 게임이 교착 상태에 빠졌다고 판단될 때 시스템에 의해 일시적으로 부여됩니다.
*   **효과**: 평소에는 없는 공격 능력이 생깁니다. 공격 시, **자신의 현재 체력과 대상의 현재 체력 중 더 큰 값**을 피해량으로 하여 공격합니다.

### 6. 비고 (Notes)
*   물고기 떼는 상황에 따라 여러 개의 작은 유닛으로 넓은 지역을 통제하거나, 하나의 강력한 대형 유닛으로 합쳐져 전선을 돌파하는 등 극도로 유연한 운영이 가능합니다.
*   유닛의 크기가 계속 변하기 때문에, 이동하거나 분열할 공간을 잘 계산하는 것이 중요합니다.
*   체력이 변할 때 크기가 부드럽게 커지거나 작아지는 시각적 효과가 있습니다.

---

## 부록: 물고기 떼 그룹 판정 원리 (간략 설명)

물고기 떼의 '그룹'은 **'그룹 지도'**를 통해 판정하며, 이 지도는 물고기 떼를 선택했을 때 맵 위에 시각적으로 표시됩니다.

1.  **영향력 범위**: 모든 물고기 떼는 자신의 크기에 비례하는 '영향력 범위'를 가집니다.
2.  **영역 표시**: 게임은 이 영향력 범위를 '그룹 지도'에 표시합니다. 서로 영향력 범위가 겹치는 물고기 떼들은 같은 색이나 번호로 묶입니다.
3.  **그룹 합류**: 한 물고기 떼의 영향력 범위가 다른 그룹의 영역과 겹치게 되면, 두 그룹은 하나의 더 큰 그룹으로 합쳐집니다.
4.  **연쇄 효과**: 이런 방식으로 멀리 떨어진 물고기 떼라도 중간에 다른 물고기 떼를 통해 연결만 되어 있다면 모두 같은 그룹으로 묶이게 됩니다.

결과적으로, '그룹 지도' 위에서 같은 그룹으로 표시되는 물고기 떼들은 서로 합칠 수 있게 됩니다.
# 거북이 (obj_unit_turtle)

> 높은 체력을 가진 탱커로, 특정 조건 하에 적의 돌진 공격을 등껍질로 받아내며 뒤로 미끄러져 공격을 무효화하고, 공격자를 그 자리에 멈추게 하는 독특한 군중 제어형 유닛입니다.

---

### 1. 역할 (Role)
*   **주 역할**: 탱커 (Tank) / 군중 제어 (Crowd Control)
*   **부 역할**: 전선 유지 (Frontline Holder) / 회피형 탱커 (Evasion Tank)

### 2. 기본 능력치 (Base Stats)
*   **체력**: 600 (고정)
*   **공격력**: 0 (기본 공격 없음)

### 3. 이동 (Movement)
*   **이동 방식**: 전진형. 유닛이 향하는 방향(`toward`)으로 전방 1칸 및 전방 대각선 2칸(위/아래), 총 3방향으로만 이동할 수 있습니다.

### 4. 핵심 메커니즘 (Core Mechanics)
> 거북이는 피해를 흡수하는 일반적인 탱커와 달리, 적의 공격을 '회피'하고 적의 움직임을 강제로 멈추게 하는 데 특화되어 있습니다.

*   **등껍질 방어 (Shell Defense)**: 거북이의 핵심 능력으로, 아래의 **모든 조건이 충족**될 때 발동합니다.
    1.  **공격 조건**: 광역(AOE) 공격이 아닌 단일 대상 공격이어야 합니다.
    2.  **공격자 조건**: 공격자가 경로를 따라 실제로 '이동하며 공격'하는 중이어야 합니다.
    3.  **위치 조건**: 거북이가 공격자의 이동 경로 정면에 위치해야 합니다.
    4.  **계산 조건**: `(공격자의 이동 거리) / (회피 거리 비율)`의 계산 결과가 정수여야 합니다. (즉, 회피할 위치가 정확히 그리드 타일 위에 떨어져야 함)
    5.  **공간 조건**: 최종적으로 회피할 위치가 맵 안의 비어있는 공간이어야 합니다.
*   발동 시, **피해를 완전히 무효화**하고 뒤쪽의 빈칸으로 미끄러지듯 회피합니다.
*   가장 중요한 효과로, **공격자의 이동을 그 자리에서 강제로 멈추고** 턴을 잠시 정지시켜 상황을 명확하게 보여줍니다.

*   **회피 거리 조절 (Evasion Distance Control)**:
    *   플레이어는 거북이에게 직접 명령을 내려 '회피 거리 비율'(`dist_division`)을 [1, 1.5, 2, 2.5, 3] 중에서 선택할 수 있습니다.
    *   이 비율은 위의 '계산 조건'에 사용되어, 회피가 발동할 수 있는 상황과 거리를 조절하는 데 영향을 줍니다.

### 5. 능력 상세 (Abilities)

#### 주 능력: 등껍질 방어 (Passive)
*   **능력명**: 등껍질 방어 (Shell Defense)
*   **발동 조건**: 이동 중인 적 유닛에게 단일 대상 공격을 받을 때, 상술한 모든 조건(공격자, 위치, 계산, 공간)이 충족되면 자동으로 발동합니다.
*   **효과**: 피해를 100% 무효화하고 설정된 비율에 따라 뒤로 미끄러져 회피합니다. 동시에 **공격자의 이동 경로(`path`)를 강제로 종료시켜 그 위치에 고정**시킵니다. 회피 시에는 몸을 빠르게 회전하며 미끄러지는 특유의 애니메이션을 보여줍니다.

#### 보조 능력: 회피 거리 조절 (Active)
*   **능력명**: 회피 거리 조절
*   **발동 조건**: 유닛을 선택하고 제자리에서 행동을 선택하여 발동합니다.
*   **효과**: "회피거리 축소비율"을 조절하는 팝업이 나타나며, 플레이어는 회피 시 밀려나는 거리의 비율을 직접 설정할 수 있습니다.

#### 특별 능력: 돌파 (Stale Breaker)
*   **능력명**: 돌파 (Stale Breaker)
*   **발동 조건**: 게임이 교착 상태에 빠졌다고 판단될 때 시스템에 의해 일시적으로 부여됩니다.
*   **효과**: 평소에는 없는 공격 능력이 생깁니다. 공격 시, **자신의 현재 체력과 대상의 현재 체력 중 더 큰 값**을 피해량으로 하여 공격합니다.

### 6. 비고 (Notes)
*   거북이는 적의 강력한 단일 돌진 유닛(예: 전사 타입)을 카운터치는 데 매우 효과적입니다.
*   단순히 길을 막는 것을 넘어, 적의 위치와 턴 흐름에 직접 개입하는 전략적인 유닛입니다.
---
