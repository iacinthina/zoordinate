# 물고기 떼 (obj_unit_fish_horde)

> 체력이 곧 크기인 독특한 유닛으로, 여러 개체가 합쳐져 거대한 단일 유닛이 되거나, 하나의 큰 개체가 여러 개의 작은 유닛으로 '분열'하여 필드를 장악할 수 있는 스웜(Swarm) 유닛입니다.

---

### 1. 역할 (Role)
*   **주 역할**: 스웜 (Swarm) / 지역 통제 (Area Control)
*   **부 역할**: 증식 (Spawner) / 관통 공격수 (Line Attacker)

### 2. 기본 능력치 (Base Stats)
*   **초기 체력**: 400
*   **공격력**: 0 (특수 공격만 보유)

### 3. 이동 (Movement)
*   **이동 방식**: 전진형. 유닛이 향하는 방향(`toward`)으로 전방 1칸 및 전방 대각선 2칸(위/아래), 총 3방향으로만 이동할 수 있습니다.

### 4. 핵심 메커니즘 (Core Mechanics)
> 물고기 떼의 모든 것은 '체력 = 크기'라는 공식으로 귀결됩니다. 체력이 변하면 유닛의 물리적인 크기(충돌 범위)도 함께 변하며, 이를 이용해 합치고 분열하며 필드를 지배합니다.

*   **크기 = 체력 (Size = Health)**: 이 유닛의 체력(`unit_value`)은 곧 무리의 크기를 의미합니다. 체력이 높을수록 유닛의 충돌 반경(`unit_radius`)도 커지고, 체력이 낮아지면 크기도 작아집니다. 피해를 입으면 무리의 규모가 줄어드는 것이 시각적으로 표현됩니다.
*   **그룹 판정 (Grouping)**: 매 턴 시작 시, 근처에 있는 아군 물고기 떼들은 자동으로 하나의 '그룹'으로 인식됩니다. 이 그룹 판정은 어떤 유닛과 합치기가 가능한지 결정하는 기반이 됩니다.
*   **합치기 (Merge)**: 같은 그룹으로 판정된 아군 물고기 떼 위로 이동하여 합칠 수 있습니다. 이동한 유닛의 체력은 목표 유닛에게 모두 흡수되며, 목표 유닛은 그만큼 더 커지고 강해집니다.
*   **분열 (Split)**: 체력이 200 이상일 때, 자신의 위치에 '분열' 명령을 내릴 수 있습니다. 사거리 내의 비어있는 타일을 선택하면, 원하는 만큼의 체력을 떼어내 새로운 물고기 떼를 생성할 수 있습니다.

### 5. 능력 상세 (Abilities)

#### 주 능력 1: 관통 공격 (Swipe Attack)
*   **능력명**: 관통 공격 (`order_fish_horde_swipeatk`)
*   **발동 조건**: 공격 가능한 적 타일로 이동 시 발동합니다.
*   **효과**: 출발 지점에서 목표 지점까지 직선으로 이동하며, 경로 상에 있는 모든 적을 타격합니다. 경로에 아군이나 중립 유닛이 있으면 그 앞에서 멈춥니다. 이 공격은 `돌파` 능력과 유사한 메커니즘을 사용하여 대상을 타격하는 것으로 보입니다.

#### 주 능력 2: 합치기 / 분열 (Merge / Split)
*   **능력명**: 합치기 / 분열
*   **발동 조건**:
    *   **합치기**: 같은 그룹의 아군 물고기 떼 타일로 이동 시 발동합니다.
    *   **분열**: 체력이 200 이상일 때, 제자리에서 행동을 선택하여 발동합니다.
*   **효과**: 하나의 거대한 유닛을 만들어 전선을 강화하거나, 여러 개의 작은 유닛으로 필드를 넓게 장악하는 등 유연한 전략을 구사할 수 있습니다.

#### 특별 능력: 돌파 (Stale Breaker)
*   **능력명**: 돌파 (Stale Breaker)
*   **발동 조건**: 게임이 교착 상태에 빠졌다고 판단될 때 시스템에 의해 일시적으로 부여됩니다.
*   **효과**: 평소에는 없는 공격 능력이 생깁니다. 공격 시, **자신의 현재 체력과 대상의 현재 체력 중 더 큰 값**을 피해량으로 하여 공격합니다.

### 6. 비고 (Notes)
*   물고기 떼는 상황에 따라 여러 개의 작은 유닛으로 넓은 지역을 통제하거나, 하나의 강력한 대형 유닛으로 합쳐져 전선을 돌파하는 등 극도로 유연한 운영이 가능합니다.
*   유닛의 크기가 계속 변하기 때문에, 이동하거나 분열할 공간을 잘 계산하는 것이 중요합니다.
*   체력이 변할 때 크기가 부드럽게 커지거나 작아지는 시각적 효과가 있습니다.

---

## 부록: 물고기 떼 그룹 판정 원리 (간략 설명)

물고기 떼의 '그룹'은 **'그룹 지도'**를 통해 판정하며, 이 지도는 물고기 떼를 선택했을 때 맵 위에 시각적으로 표시됩니다.

1.  **영향력 범위**: 모든 물고기 떼는 자신의 크기에 비례하는 '영향력 범위'를 가집니다.
2.  **영역 표시**: 게임은 이 영향력 범위를 '그룹 지도'에 표시합니다. 서로 영향력 범위가 겹치는 물고기 떼들은 같은 색이나 번호로 묶입니다.
3.  **그룹 합류**: 한 물고기 떼의 영향력 범위가 다른 그룹의 영역과 겹치게 되면, 두 그룹은 하나의 더 큰 그룹으로 합쳐집니다.
4.  **연쇄 효과**: 이런 방식으로 멀리 떨어진 물고기 떼라도 중간에 다른 물고기 떼를 통해 연결만 되어 있다면 모두 같은 그룹으로 묶이게 됩니다.

결과적으로, '그룹 지도' 위에서 같은 그룹으로 표시되는 물고기 떼들은 서로 합칠 수 있게 됩니다.